import{_ as y}from"./nuxt-link.LS28sDWo.js";import{q as k,u as B,r as _,s as I,o as S,c as E,a as e,b as l,w as d,d as p,p as C,e as D,v as F,_ as N}from"./entry.JjGpzShI.js";import{u as T,V as $}from"./index.yT0FPK_q.js";import{V as j,u as U,a as h,b as z}from"./VTextField.nH1RBvYf.js";const i=r=>(C("data-v-982bb11a"),r=r(),D(),r),A={class:"member-layout"},M=i(()=>e("div",{class:"pic-palace"},null,-1)),Q={class:"interface"},q=i(()=>e("div",{class:"img-wave"},null,-1)),G={class:"member-board"},J=i(()=>e("div",{class:"font-title color-primary"},"享樂酒店，誠摯歡迎",-1)),O=i(()=>e("h1",{class:"bold mt-2"},"立即開始旅程",-1)),P={class:"info-field"},R=i(()=>e("div",{class:"font-title mb-2"},"電子信箱",-1)),X={class:"info-field"},Z=i(()=>e("div",{class:"font-title mb-2"},"密碼",-1)),H={class:"info-field d-flex justify-space-between"},K={class:"mt-10 font-body"},L=i(()=>e("span",null,"沒有會員嗎？",-1)),W=k({__name:"login",setup(r){const{$swal:c}=F(),b=B(),w=T("token"),u=_(),a=_({email:"",password:""}),m=_(!0),f=I({email:[o=>!!o||"必填",o=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/i.test(o)||"信箱格式不正確"],password:[o=>!!o||"必填",o=>o.length>=8||"密碼需至少 8 碼以上",o=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(o)||"密碼需包含英文及數字"]}),V=function(){if(u.value)return u.value.validate()},x=function(){c.fire({title:"尚未完成",text:"請填寫所需欄位",icon:"error",confirmButtonText:"我知道了"})},g=async function(){const{valid:o}=await V();if(o){const{data:t,error:n}=await U("https://freyja-1jf2.onrender.com/api/v1/user/login",{method:"POST",body:{...a.value}},"$4Q7McJQDXG");if(t.value&&t.value.status)w.value=t.value.token,m.value?localStorage.setItem("hotelEmail",a.value.email):localStorage.removeItem("hotelEmail"),await c.fire({title:"登入成功",icon:"success"}),b.push("/");else if(n.value){const{data:s}=n.value;c.fire({title:s.message,icon:"error"})}}else x()},v=localStorage.getItem("hotelEmail");return v&&(a.value.email=v),(o,t)=>{const n=y;return S(),E("div",A,[M,e("div",Q,[q,e("div",G,[J,O,l(j,{ref_key:"table",ref:u,class:"my-10"},{default:d(()=>[e("div",P,[R,l(h,{modelValue:a.value.email,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.email=s),rules:f.email,variant:"solo",placeholder:"請輸入電子信箱","hide-details":"auto"},null,8,["modelValue","rules"])]),e("div",X,[Z,l(h,{modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.password=s),rules:f.password,type:"password",variant:"solo",placeholder:"請輸入密碼","hide-details":"auto"},null,8,["modelValue","rules"])]),e("div",H,[l(z,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),color:"#BF9D7D",label:"記住帳號","hide-details":""},null,8,["modelValue"]),l(n,{to:"",class:"color-primary text-decoration-underline"},{default:d(()=>[p("忘記密碼？")]),_:1})])]),_:1},512),l($,{color:"#BF9D7D",block:"",size:"large",onClick:g},{default:d(()=>[p(" 會員登入 ")]),_:1}),e("div",K,[L,l(n,{to:{name:"signup"},class:"color-primary text-decoration-underline ml-2"},{default:d(()=>[p("前往註冊")]),_:1})])])])])}}}),ae=N(W,[["__scopeId","data-v-982bb11a"]]);export{ae as default};

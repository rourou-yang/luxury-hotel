import{_ as y}from"./nuxt-link.2tMM1o9Q.js";import{q as k,u as g,r as m,s as B,o as C,c as D,a as e,b as a,w as r,d as _,p as F,e as I,v as N,_ as S}from"./entry.iHIH0844.js";import{u as T,V as $}from"./index.y8jpyzTn.js";import{V as j,u as U,a as v,b as z}from"./VTextField.4-90s4jQ.js";const l=d=>(F("data-v-cddd649c"),d=d(),I(),d),A={class:"member-layout"},E=l(()=>e("div",{class:"pic-palace"},null,-1)),M={class:"interface"},Q=l(()=>e("div",{class:"img-wave"},null,-1)),q={class:"member-board"},G=l(()=>e("div",{class:"font-title color-primary"},"享樂酒店，誠摯歡迎",-1)),J=l(()=>e("h1",{class:"bold mt-2"},"立即開始旅程",-1)),O={class:"info-field"},P=l(()=>e("div",{class:"font-title mb-2"},"電子信箱",-1)),R={class:"info-field"},X=l(()=>e("div",{class:"font-title mb-2"},"密碼",-1)),Z={class:"info-field d-flex justify-space-between"},H={class:"mt-10 font-body"},K=l(()=>e("span",null,"沒有會員嗎？",-1)),L=k({__name:"login",setup(d){const{$swal:c}=N(),h=g(),w=T("token"),u=m(),i=m({email:"",password:""}),p=m(!0),f=B({email:[o=>!!o||"必填",o=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/i.test(o)||"信箱格式不正確"],password:[o=>!!o||"必填",o=>o.length>=8||"密碼需至少 8 碼以上",o=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(o)||"密碼需包含英文及數字"]}),V=function(){if(u.value)return u.value.validate()},b=function(){c.fire({title:"尚未完成",text:"請填寫所需欄位",icon:"error",confirmButtonText:"我知道了"})},x=async function(){const{valid:o}=await V();if(o){const{data:t,error:n}=await U("https://freyja-1jf2.onrender.com/api/v1/user/login",{method:"POST",body:{...i.value}},"$4Q7McJQDXG");if(t.value&&t.value.status)w.value=t.value.token,await c.fire({title:"登入成功",icon:"success"}),h.push("/");else if(n.value){const{data:s}=n.value;c.fire({title:s.message,icon:"error"})}}else b()};return(o,t)=>{const n=y;return C(),D("div",A,[E,e("div",M,[Q,e("div",q,[G,J,a(j,{ref_key:"table",ref:u,class:"my-10"},{default:r(()=>[e("div",O,[P,a(v,{modelValue:i.value.email,"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.email=s),rules:f.email,variant:"solo",placeholder:"請輸入電子信箱","hide-details":"auto"},null,8,["modelValue","rules"])]),e("div",R,[X,a(v,{modelValue:i.value.password,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.password=s),rules:f.password,type:"password",variant:"solo",placeholder:"請輸入密碼","hide-details":"auto"},null,8,["modelValue","rules"])]),e("div",Z,[a(z,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),color:"#BF9D7D",label:"記住帳號","hide-details":""},null,8,["modelValue"]),a(n,{to:"",class:"color-primary text-decoration-underline"},{default:r(()=>[_("忘記密碼？")]),_:1})])]),_:1},512),a($,{color:"#BF9D7D",block:"",size:"large",onClick:x},{default:r(()=>[_(" 會員登入 ")]),_:1}),e("div",H,[K,a(n,{to:{name:"signup"},class:"color-primary text-decoration-underline ml-2"},{default:r(()=>[_("前往註冊")]),_:1})])])])])}}}),te=S(L,[["__scopeId","data-v-cddd649c"]]);export{te as default};
